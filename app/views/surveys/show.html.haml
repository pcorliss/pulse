- d3_data = transform_responses_d3(@survey, @survey.answers, @survey.questions)

.survey_chart
  %svg

-#.historical_chart
  -#%svg

:javascript
  var d3_data = #{d3_data.to_json}
  $(function() {
    console.log("Test Data:", d3_data);

    nv.addGraph(function() {
      var height=500;
      var chart = nv.models.multiBarChart()
        .margin({top: 50, bottom: 30, left: 40, right: 10})
        .height(height);

      chart.xAxis
        .tickFormat(d3.format(',d'));

      chart.yAxis
        .tickFormat(d3.format(',d'));

      d3.select('.survey_chart svg')
        .datum(d3_data)
        .transition()
        .duration(500)
        .attr('height', height)
        .call(chart);

      nv.utils.windowResize(chart.update);

      return chart;
    });
  });
